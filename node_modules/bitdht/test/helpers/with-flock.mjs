import Flock from '@omegajs/flock'

export async function withFlock (dht, cb) {
  const flock = new Flock({ dht })

  try {
    await cb(flock)
  } finally {
    await flock.destroy()
  }
}
