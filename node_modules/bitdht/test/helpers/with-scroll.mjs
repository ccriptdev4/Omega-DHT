import Scroll from '@omegajs/scroll'
import RAM from 'random-access-memory'

export async function withScroll (options, cb) {
  if (typeof options === 'function') {
    cb = options
    options = {}
  }

  const scroll = new Scroll(RAM, options)
  await scroll.ready()

  try {
    await cb(scroll)
  } finally {
    await scroll.close()
  }
}
